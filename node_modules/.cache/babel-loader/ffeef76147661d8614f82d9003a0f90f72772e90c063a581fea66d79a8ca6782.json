{"ast":null,"code":"import React,{useState,useRef}from'react';import axios from'axios';import'./upload.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const FileUploadForm=()=>{const[selectedFile,setSelectedFile]=useState(null);const[textValue,setTextValue]=useState('');const[uploadProgress,setUploadProgress]=useState(0);const fileInputRef=useRef(null);const handleKeyDown=event=>{// Check if the pressed key is space\nif(event.key===' '){event.preventDefault();// Prevent entering space in the input\nalert(\"You can't press space in consumer number\");}};const handleTextChange=event=>{const inputValue=event.target.value;if(!isNaN(inputValue)){setTextValue(inputValue);}else{alert(\"Please enter a number\");}};const handleFileChange=event=>{const file=event.target.files[0];console.log(file);if(file===undefined){setSelectedFile(null);}else{setSelectedFile(file);}};const clearInputs=()=>{setSelectedFile(null);setTextValue('');setUploadProgress(0);fileInputRef.current.value=null;};const handleFormSubmit=async event=>{event.preventDefault();if(selectedFile===null){alert(\"Please upload the file\");return;}if(textValue===''){alert(\"Please enter a consumer id\");return;}if(selectedFile){const formData=new FormData();formData.append('pdfFile',selectedFile);formData.append('consumerNo',textValue);try{const response=await axios.post('http://127.0.0.1:8000/user/upload-pdf/',formData,{headers:{'Content-Type':'multipart/form-data'},onUploadProgress:progressEvent=>{const progress=Math.round(progressEvent.loaded/progressEvent.total*100);setUploadProgress(progress);}});console.log(response);if(response.status===200){alert(\"PDF Uploaded successfully\");clearInputs();console.log('PDF uploaded successfully');}else if(response.status===403){alert(\"Consumer Number is already present\");clearInputs();}else{console.error('Failed to upload PDF');clearInputs();}}catch(error){const status_code=error['response']['status'];if(status_code===403){alert(\"Consumer is already present\");clearInputs();}else{alert(\"failed to upload PDF\");clearInputs();}}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-box\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"d-flex justify-content-center pb-5 fw-light\",children:\"Upload Consumer's Documents\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload-form text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group d-flex justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text-input\",className:\"p-2 w-5\",children:\"Consumer No:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"text-input\",className:\"form-control w-50\",value:textValue,onChange:handleTextChange,onKeyDown:handleKeyDown})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group d-flex justify-content-center align-items-center p-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-input\",className:\"p-2 w-5 d-flex justify-content-start\",children:\"Upload File:\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",id:\"file-input\",className:\"form-control fileUploadButton\",onChange:handleFileChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary pt-2\",onClick:handleFormSubmit,children:\"Submit\"})})]})]});};export default FileUploadForm;","map":{"version":3,"names":["React","useState","useRef","axios","jsx","_jsx","jsxs","_jsxs","FileUploadForm","selectedFile","setSelectedFile","textValue","setTextValue","uploadProgress","setUploadProgress","fileInputRef","handleKeyDown","event","key","preventDefault","alert","handleTextChange","inputValue","target","value","isNaN","handleFileChange","file","files","console","log","undefined","clearInputs","current","handleFormSubmit","formData","FormData","append","response","post","headers","onUploadProgress","progressEvent","progress","Math","round","loaded","total","status","error","status_code","className","children","htmlFor","type","id","onChange","onKeyDown","ref","onClick"],"sources":["/home/sudip/DocStorage/src/Pages/Employee/Upload/upload.jsx"],"sourcesContent":["import React, { useState,useRef } from 'react';\nimport axios from 'axios';\n\nimport './upload.css';\n\nconst FileUploadForm = () => {\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [textValue, setTextValue] = useState('');\n    const [uploadProgress, setUploadProgress] = useState(0);\n    const fileInputRef = useRef(null);\n\n    const handleKeyDown = (event) => {\n        // Check if the pressed key is space\n        if (event.key === ' ') {\n          event.preventDefault(); // Prevent entering space in the input\n          alert(\"You can't press space in consumer number\");\n        }\n      };\n\n    const handleTextChange = (event) => {\n        const inputValue = event.target.value;\n        if (!isNaN(inputValue)) {\n            setTextValue(inputValue);\n        } else{\n            alert(\"Please enter a number\");\n        }\n    };\n\n    const handleFileChange = (event) => {\n        const file = event.target.files[0];\n        console.log(file);\n        if (file === undefined){\n            setSelectedFile(null)\n        } else{\n            setSelectedFile(file);\n        }\n    };\n\n    const clearInputs = () => {\n        setSelectedFile(null);\n        setTextValue('');\n        setUploadProgress(0);\n        fileInputRef.current.value = null;\n    }\n\n    const handleFormSubmit = async (event) => {\n        event.preventDefault();\n        if (selectedFile === null){\n            alert(\"Please upload the file\");\n            return;\n        }\n        if (textValue === '') {\n            alert(\"Please enter a consumer id\");\n            return;\n        }\n\n        if (selectedFile) {\n            const formData = new FormData();\n            formData.append('pdfFile', selectedFile);\n            formData.append('consumerNo', textValue);\n\n            try {\n                const response = await axios.post('http://127.0.0.1:8000/user/upload-pdf/', formData, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                    },\n                    onUploadProgress: (progressEvent) => {\n                        const progress = Math.round((progressEvent.loaded / progressEvent.total) * 100);\n                        setUploadProgress(progress);\n                    },\n                });\n                console.log(response)\n\n                if (response.status === 200) {\n                    alert(\"PDF Uploaded successfully\");\n                    clearInputs();\n                    console.log('PDF uploaded successfully');\n                } else if(response.status === 403){\n                    alert(\"Consumer Number is already present\");\n                    clearInputs();\n                } else {\n                    console.error('Failed to upload PDF');\n                    clearInputs();\n                }\n            } catch (error) {\n                const status_code = error['response']['status'];\n                if (status_code === 403){\n                    alert(\"Consumer is already present\");\n                    clearInputs();\n                } else{\n                    alert(\"failed to upload PDF\");\n                    clearInputs();\n                }\n                \n            }\n        }\n    };\n\n    return (\n        <div className='upload-box'>\n            <h3 className='d-flex justify-content-center pb-5 fw-light'>Upload Consumer's Documents</h3>\n            <div className=\"file-upload-form text-center\">\n                <div className=\"form-group d-flex justify-content-center align-items-center\">\n                    <label htmlFor=\"text-input\" className='p-2 w-5'>Consumer No:</label>\n                    <input type=\"text\" id=\"text-input\" className=\"form-control w-50\" value={textValue} onChange={handleTextChange} onKeyDown={handleKeyDown}/>\n                </div>\n                <div className=\"form-group d-flex justify-content-center align-items-center p-4\">\n                    <label htmlFor=\"file-input\" className='p-2 w-5 d-flex justify-content-start'>Upload File:</label>\n                    <input ref={fileInputRef} type=\"file\" id=\"file-input\" className=\"form-control fileUploadButton\" onChange={handleFileChange} />\n                </div>\n                <div className=\"form-group\">\n                    <button className=\"btn btn-primary pt-2\" onClick={handleFormSubmit}>Submit</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default FileUploadForm;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAACC,MAAM,KAAQ,OAAO,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtB,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACU,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACY,cAAc,CAAEC,iBAAiB,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CACvD,KAAM,CAAAc,YAAY,CAAGb,MAAM,CAAC,IAAI,CAAC,CAEjC,KAAM,CAAAc,aAAa,CAAIC,KAAK,EAAK,CAC7B;AACA,GAAIA,KAAK,CAACC,GAAG,GAAK,GAAG,CAAE,CACrBD,KAAK,CAACE,cAAc,CAAC,CAAC,CAAE;AACxBC,KAAK,CAAC,0CAA0C,CAAC,CACnD,CACF,CAAC,CAEH,KAAM,CAAAC,gBAAgB,CAAIJ,KAAK,EAAK,CAChC,KAAM,CAAAK,UAAU,CAAGL,KAAK,CAACM,MAAM,CAACC,KAAK,CACrC,GAAI,CAACC,KAAK,CAACH,UAAU,CAAC,CAAE,CACpBV,YAAY,CAACU,UAAU,CAAC,CAC5B,CAAC,IAAK,CACFF,KAAK,CAAC,uBAAuB,CAAC,CAClC,CACJ,CAAC,CAED,KAAM,CAAAM,gBAAgB,CAAIT,KAAK,EAAK,CAChC,KAAM,CAAAU,IAAI,CAAGV,KAAK,CAACM,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CACjB,GAAIA,IAAI,GAAKI,SAAS,CAAC,CACnBrB,eAAe,CAAC,IAAI,CAAC,CACzB,CAAC,IAAK,CACFA,eAAe,CAACiB,IAAI,CAAC,CACzB,CACJ,CAAC,CAED,KAAM,CAAAK,WAAW,CAAGA,CAAA,GAAM,CACtBtB,eAAe,CAAC,IAAI,CAAC,CACrBE,YAAY,CAAC,EAAE,CAAC,CAChBE,iBAAiB,CAAC,CAAC,CAAC,CACpBC,YAAY,CAACkB,OAAO,CAACT,KAAK,CAAG,IAAI,CACrC,CAAC,CAED,KAAM,CAAAU,gBAAgB,CAAG,KAAO,CAAAjB,KAAK,EAAK,CACtCA,KAAK,CAACE,cAAc,CAAC,CAAC,CACtB,GAAIV,YAAY,GAAK,IAAI,CAAC,CACtBW,KAAK,CAAC,wBAAwB,CAAC,CAC/B,OACJ,CACA,GAAIT,SAAS,GAAK,EAAE,CAAE,CAClBS,KAAK,CAAC,4BAA4B,CAAC,CACnC,OACJ,CAEA,GAAIX,YAAY,CAAE,CACd,KAAM,CAAA0B,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,SAAS,CAAE5B,YAAY,CAAC,CACxC0B,QAAQ,CAACE,MAAM,CAAC,YAAY,CAAE1B,SAAS,CAAC,CAExC,GAAI,CACA,KAAM,CAAA2B,QAAQ,CAAG,KAAM,CAAAnC,KAAK,CAACoC,IAAI,CAAC,wCAAwC,CAAEJ,QAAQ,CAAE,CAClFK,OAAO,CAAE,CACL,cAAc,CAAE,qBACpB,CAAC,CACDC,gBAAgB,CAAGC,aAAa,EAAK,CACjC,KAAM,CAAAC,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAAEH,aAAa,CAACI,MAAM,CAAGJ,aAAa,CAACK,KAAK,CAAI,GAAG,CAAC,CAC/EjC,iBAAiB,CAAC6B,QAAQ,CAAC,CAC/B,CACJ,CAAC,CAAC,CACFd,OAAO,CAACC,GAAG,CAACQ,QAAQ,CAAC,CAErB,GAAIA,QAAQ,CAACU,MAAM,GAAK,GAAG,CAAE,CACzB5B,KAAK,CAAC,2BAA2B,CAAC,CAClCY,WAAW,CAAC,CAAC,CACbH,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CAC5C,CAAC,IAAM,IAAGQ,QAAQ,CAACU,MAAM,GAAK,GAAG,CAAC,CAC9B5B,KAAK,CAAC,oCAAoC,CAAC,CAC3CY,WAAW,CAAC,CAAC,CACjB,CAAC,IAAM,CACHH,OAAO,CAACoB,KAAK,CAAC,sBAAsB,CAAC,CACrCjB,WAAW,CAAC,CAAC,CACjB,CACJ,CAAE,MAAOiB,KAAK,CAAE,CACZ,KAAM,CAAAC,WAAW,CAAGD,KAAK,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,CAC/C,GAAIC,WAAW,GAAK,GAAG,CAAC,CACpB9B,KAAK,CAAC,6BAA6B,CAAC,CACpCY,WAAW,CAAC,CAAC,CACjB,CAAC,IAAK,CACFZ,KAAK,CAAC,sBAAsB,CAAC,CAC7BY,WAAW,CAAC,CAAC,CACjB,CAEJ,CACJ,CACJ,CAAC,CAED,mBACIzB,KAAA,QAAK4C,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB/C,IAAA,OAAI8C,SAAS,CAAC,6CAA6C,CAAAC,QAAA,CAAC,6BAA2B,CAAI,CAAC,cAC5F7C,KAAA,QAAK4C,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eACzC7C,KAAA,QAAK4C,SAAS,CAAC,6DAA6D,CAAAC,QAAA,eACxE/C,IAAA,UAAOgD,OAAO,CAAC,YAAY,CAACF,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACpE/C,IAAA,UAAOiD,IAAI,CAAC,MAAM,CAACC,EAAE,CAAC,YAAY,CAACJ,SAAS,CAAC,mBAAmB,CAAC3B,KAAK,CAAEb,SAAU,CAAC6C,QAAQ,CAAEnC,gBAAiB,CAACoC,SAAS,CAAEzC,aAAc,CAAC,CAAC,EACzI,CAAC,cACNT,KAAA,QAAK4C,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC5E/C,IAAA,UAAOgD,OAAO,CAAC,YAAY,CAACF,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACjG/C,IAAA,UAAOqD,GAAG,CAAE3C,YAAa,CAACuC,IAAI,CAAC,MAAM,CAACC,EAAE,CAAC,YAAY,CAACJ,SAAS,CAAC,+BAA+B,CAACK,QAAQ,CAAE9B,gBAAiB,CAAE,CAAC,EAC7H,CAAC,cACNrB,IAAA,QAAK8C,SAAS,CAAC,YAAY,CAAAC,QAAA,cACvB/C,IAAA,WAAQ8C,SAAS,CAAC,sBAAsB,CAACQ,OAAO,CAAEzB,gBAAiB,CAAAkB,QAAA,CAAC,QAAM,CAAQ,CAAC,CAClF,CAAC,EACL,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA5C,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}