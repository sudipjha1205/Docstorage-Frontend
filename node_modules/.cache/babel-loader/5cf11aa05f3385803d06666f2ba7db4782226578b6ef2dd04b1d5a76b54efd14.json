{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const GetConsumerData=()=>{const[consumerNumber,setConsumerNumber]=useState('');const handleKeyDown=event=>{// Check if the pressed key is space\nif(event.key===' '){event.preventDefault();// Prevent entering space in the input\nalert(\"You can't press space in consumer number\");}};const handleTextChange=event=>{const inputValue=event.target.value;if(!isNaN(inputValue)){setConsumerNumber(inputValue);}else{alert(\"Please enter a number\");}};const handleFetchPDF=async()=>{try{const response=await axios.get(\"http://127.0.0.1:8000/user/get-pdf/\".concat(consumerNumber,\"/\"),{responseType:'arraybuffer'});// Create a Blob from the PDF data\nconst blob=new Blob([response.data],{type:'application/pdf'});// Create a link element and trigger a download\nconst link=document.createElement('a');link.href=window.URL.createObjectURL(blob);link.download=\"\".concat(consumerNumber,\".pdf\");link.click();setConsumerNumber('');}catch(error){if(error['response']['status']===404){alert('Consumer Number not found');setConsumerNumber('');}else{console.error('Error fetching PDF:',error);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-box\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"d-flex justify-content-center pb-5 fw-light\",children:\"Get Consumer's Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload-form text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group d-flex justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text-input\",className:\"p-2 w-5\",children:\"Consumer No:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"text-input\",className:\"form-control w-50\",value:consumerNumber,onChange:handleTextChange,onKeyDown:handleKeyDown})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mt-5\",onClick:handleFetchPDF,children:\"Submit\"})})]})]});};export default GetConsumerData;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","GetConsumerData","consumerNumber","setConsumerNumber","handleKeyDown","event","key","preventDefault","alert","handleTextChange","inputValue","target","value","isNaN","handleFetchPDF","response","get","concat","responseType","blob","Blob","data","type","link","document","createElement","href","window","URL","createObjectURL","download","click","error","console","className","children","htmlFor","id","onChange","onKeyDown","onClick"],"sources":["/home/sudip/DocStorage/src/Pages/Employee/GetConsumerData/GetConsumerData.jsx"],"sourcesContent":["import React,{ useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst GetConsumerData = () => {\n    const [consumerNumber, setConsumerNumber] = useState('');\n\n    const handleKeyDown = (event) => {\n        // Check if the pressed key is space\n        if (event.key === ' ') {\n          event.preventDefault(); // Prevent entering space in the input\n          alert(\"You can't press space in consumer number\");\n        }\n      };\n\n    const handleTextChange = (event) => {\n        const inputValue = event.target.value;\n        if (!isNaN(inputValue)) {\n            setConsumerNumber(inputValue);\n        } else{\n            alert(\"Please enter a number\");\n        }\n    };\n\n    const handleFetchPDF = async () => {\n        try {\n            const response = await axios.get(`http://127.0.0.1:8000/user/get-pdf/${consumerNumber}/`, {\n                responseType: 'arraybuffer',\n            });\n            // Create a Blob from the PDF data\n            const blob = new Blob([response.data], { type: 'application/pdf' });\n\n            // Create a link element and trigger a download\n            const link = document.createElement('a');\n            link.href = window.URL.createObjectURL(blob);\n            link.download = `${consumerNumber}.pdf`;\n            link.click();\n            setConsumerNumber('');\n        } catch (error) {\n            if (error['response']['status'] === 404){\n                alert('Consumer Number not found');\n                setConsumerNumber('');\n            } else {\n            console.error('Error fetching PDF:', error);\n            }\n        }\n    };\n\n\n    return (\n        <div className='upload-box'>\n            <h3 className='d-flex justify-content-center pb-5 fw-light'>Get Consumer's Details</h3>\n            <div className=\"file-upload-form text-center\">\n                <div className=\"form-group d-flex justify-content-center align-items-center\">\n                    <label htmlFor=\"text-input\" className='p-2 w-5'>Consumer No:</label>\n                    <input type=\"text\" id=\"text-input\" className=\"form-control w-50\" value={consumerNumber} onChange={handleTextChange} onKeyDown={handleKeyDown}/>\n                </div>\n                <div className=\"form-group\">\n                    <button className=\"btn btn-primary mt-5\" onClick={handleFetchPDF}>Submit</button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default GetConsumerData;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}